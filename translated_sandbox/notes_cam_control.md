### Управление камерой с земли

В качестве эксперимента [`mavfwd`](mavfwd) был дополнен парсером mavlink-пакета RC_CHANNELS (значения RC каналов, отправленные с любого RC-линка, например с наземной станции [(джойстика)](https://github.com/whoim2/arduremote) через [Mission Planner joystick](https://ardupilot.org/copter/docs/common-joystick.html)) или с [подключенного](rcjoystick.md) к регистратору джойстика.

Он мониторит изменения в указанном в аргументе `--channels X` или `-c X`каналах, считая после первых 4х, и при их наличии вызывает скрипт [`/root/channels.sh`](gk7205v200/root), передавая в него два параметра (номер канала и значение), и который производит необходимые операции. Например, `-c 1` будет мониторить только 5й канал, а `-c 4` будет мониторить 5,6,7,8 каналы. В текущем [примере](gk7205v200/root/channels.sh) это изменение режима работы камеры (1080p@30fsp / 720p@5-fps) на 5-м канале, смена luminance на 7м (трехпозиционный переключатель) и переключатель ircut (поляризационного фильтра). По умолчанию `-c 0`, т.е. отключен.

Для установки его на камеру замените в `/usr/sbin/` штатный mavfwd на [измененный](mavfwd/mavfwd), и добавьте параметр `-c` в [`/usr/bin/telemetry`](gk7205v200/usr/bin/telemetry#L39). Заодно получите возможность установить скорость телеметрии для связи с полетником выше чем 115200, конечно на свой страх и риск!
Приветствуются идеи и пожелания по этому поводу, которые можно высказать [здесь](https://t.me/+BMyMoolVOpkzNWUy).

upd 31.03.2023 Добавил распознавание mavlink 2 протокола.

