# OpenIPC Wiki
[Оглавление](../README.md)

Switcam HS-303
--------------

Компания-производитель выпускала IP камеры Switcam HS-303 в трёх версиях,
значительно отличающихся аппаратно между собой. На данный момент проект
OpenIPC поддерживает прошивку без разборки всех трёх версий камер.

Обсуждение проекта и возможностей прошивок (на русском языке) возможно в
открытой [Telegram](https://openipc.org/our-channels) группе нашего проекта.

Визуальное отличие устройств по цвету:

* HS303 v1 - имеет чёрно-белый цвет
* HS303 v2 - имеет черный цвет
* HS303 v3 - имеет белый цвет и более вытянутую вертикально форму

**Выбирайте правильный тип прошивки для своей камеры !**



## Подготовка перед прошивкой и эксплуатацией

Для комфортной работы в камерами OpenIPC в Windows необходимо установить программы:

* [Putty](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html) для доступа по протоколу ssh (лучшая замена telnet)
* [WinSCP](https://winscp.net/eng/docs/lang:ru) для доступа к файловой системе по протоколу scp
* [Notepad++](https://notepad-plus-plus.org/) в качестве редактора файлов на Linux камере

Для входа по SSH необходимо использовать имя пользователя root, без пароля



## HS303 v1/v2/v3

### Краткая инструкция установки OpenIPC на 2024.08.08

- подключите SD/MMC карту к ПК, удалите все файлы и разделы, создайте один новый раздел 1GB
- карта может быть любого размера до 64GB включительно, но первый раздел должен быть именно таким
- отформатируйте SD/MMC карту как FAT
- всё остальное пространство на карте оставьте неразмеченным и не отформатированным
- распакуйте архив и поместите содержимое папки OpenIPC_PayWall в корень SD/MMC карты
- вставьте карту памяти в слот и четким движением подайте питание на камеру
- не допускайте дребезга контактов при подаче питания, это может привести к проблемам
- через 1 минуту (обновится загрузчик), сделайте сброс питания на пару секунд
- примерно через 3 минуты камера будет прошита и готова для настройки WiFi
- сделайте сброс питания на пару секунд и извлеките SD карту (она должна стать пустой)
- направьте камеру на [QR код](https://openipc.org/tools/qr-code-generator?locale=ru) с настройками вашей сети WiFi и подберите положение считывания
- после звукового сообщения о готовности устройства, камера автоматически перезагрузится
- камера готова к эксплуатации

Для восстановления настроек, достаточно записать сохраненные каталог и фаил в
корень SD карты, вставить её в выключенную камеру и подать питание.

Если вы прошиваете серию камер, обратите внимание на то, что после полной инициализации
прошитое устройство самостоятельно удаляет файлы обновлений, чтобы не происходило
зацикливания процесса прошивки, если пользователь забудет SD карту в камере.
Таким образом, удаленные файлы нужно восстанавливать перед прошивкой каждого нового
экземпляра камеры.

При использовании SD карты для записи видео (после прошивки), логический раздел можно
увеличить до 32GB.


### Наиболее актуальные вопросы и ответы

#### Где можно взять прошивку для устройств Ростелеком Switcam HS303 v1/v2/v3 ?

Готовые файлы для прошивки и базовая техподдержка доступны в телеграм группе
через PayWall сервис [здесь](https://paywall.pw/openipc).

Пошаговая инструкция по прошивке устройств и несколько ответов на часто задаваемые
вопросы находятся [здесь](https://github.com/OpenIPC/wiki/blob/master/ru/hardware-hs303.md).

Исходные коды проекта, для тех кому претит PayWall или кто хочет собрать прошивку
полностью [самостоятельно](https://github.com/OpenIPC).

Ваше право выбора в действиях полностью соблюдено. Успехов в техническом творчестве !

#### Как узнать какой IP адрес у прошитой камеры и как зайти на неё ?

Если внесены корректные данные по настройке WiFi интерфейса в конфигурационный
файл (SSID и ключ), то вы можете найти IP адрес камеры на своём роутере в списке
подключенных устройств с пометкой "OpenIPC".
Интерфейс управления камерой доступен в браузере на стандартном порту (80), а доступ по SSH
возможен на порту 22 с использованием логина root с паролем 12345 при первом подключении.


#### Что делать если камера прошилась но нет связи по WiFi ?

Проверте настройки на WiFi роутере, выставьте жестко любой канал, например 5
(не Auto), смените ширину полосы на 20MHz и установите режим работы B/G only.


#### Как можно обновить прошивку до последней актуальной версии через SSH ?

$\color{red}{\texttt{Внимание ! Только для прошивок от августа 2024 года !}}$

Зайдите на камеру по протоколу SSH через программу Putty (логин root, с паролем 12345,
при первом подключении или с паролем, который установили в WEB, 22 порт) и
выполните команду:

```
sysupgrade -k -r
```

При наличии интернета, камера автоматически подключится к GitHub, скачает
и установит самые последние обновления.


#### Как можно обновить прошивку до последней актуальной версии через WEB ?

Зайдите на камеру через браузер указав IP адрес камеры и порт подключения 80,
например вот так:

```
http://192.168.1.10
```

Введите дефолтные логин и пароль (логин root, пароль 12345).
После захода на камеру, установите новый пароль (не забудьте его записать!).
В разделе Firmware/Прошивка выполните действия, которые указаны в подсказках.

#### Как зарегистрировать данный тип камеры на сервисе ipeye.ru ?

В личном кабинете IPeye (зайти обязательно через браузер) добавить камеру по ID,
в качестве которого использовать MAC написанный в нижнем регистре (маленькими 
буквами). MAC написан на титульной странице WEB-интерфейса на 85 порту.

Перед этим необходимо включить поддержку протокола IPeye во вкладке Majestic в
WEB-интерфейсе или присвоить параметру `ipeye.enabled` статус `true` в конфигурационном
файле `/etc/majestic.yaml`, а так-же перезагрузить камеру.

#### Как сбросить пароль если забыл его, при этом сохранив все остальные настройки ?

Создайте или отредактируйте на SD карте фаил autoconfig.sh через редактор Notepad++
что-бы его содержание выглядело следующим образом:

```
#!/bin/sh
cp /rom/etc/shadow /etc/shadow
```
Отключите питание у камеры, вставьте SD карту, включите питание и дождитесь готовности
по двум щелчкам ИК фильтра и после этого можно пробовать заходить с паролем по-умолчанию.

